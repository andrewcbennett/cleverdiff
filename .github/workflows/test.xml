name: test
on:
    push:
        branches:
            - master
    pull_request:
        branches:
            - master

jobs:
     test:
         runs-on: ubuntu-latest
         steps:
         - uses: actions/checkout@v2
         - uses: actions/setup-python@v2
           with:
               python-version: '3.x'
         - name: Install dependencies
           run: python -m pip install pytest isort black pyflakes
         - name: Run tests
           run: python -m pytest
         - name: Check import are sorted
           run: isort --check-only --recursive .
         - name: Check code formatting
           run: black --check .
         - name: Check for flaky code
           run: pyflakes .

